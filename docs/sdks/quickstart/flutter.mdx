---
title: Flutter
hide_title: true
sidebar_position: 3
---


## ğŸš€ä½¿ç”¨ Demo
æˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨é¦–å…ˆè¿è¡Œæˆ‘ä»¬ä¸ºæ‚¨å‡†å¤‡çš„æ¡†æ¶ç›¸å…³çš„ç¤ºä¾‹ [DEMO](https://github.com/OpenIMSDK/Open-IM-Flutter-Demo) ã€‚è¿™ä¸ä»…å¯ä»¥è®©æ‚¨ç›´è§‚ä½“éªŒ OpenIMSDK çš„åŠŸèƒ½ï¼Œè¿˜å°†å¸®åŠ©æ‚¨åœ¨å®é™…é›†æˆè¿‡ç¨‹ä¸­è¿…é€Ÿå®šä½å’Œè§£å†³é—®é¢˜ã€‚




## é›†æˆæ­¥éª¤

### 1. æ·»åŠ ä¾èµ–åˆ° yaml

       flutter_openim_sdk: latest

### 2. å¯¼å…¥åŒ…

      import 'package:flutter_openim_sdk/flutter_openim_sdk.dart';

### 3. åˆå§‹åŒ–

```dart
final success = await OpenIM.iMManager.initSDK(
    platform: 0, // å¹³å°ï¼Œå‚ç…§IMPlatformç±»,
    apiAddr: "", // SDKçš„APIæ¥å£åœ°å€ã€‚
    wsAddr: "",  // SDKçš„web socketåœ°å€
    dataDir: "", // æ•°æ®å­˜å‚¨è·¯å¾„ã€‚å¦‚ï¼švar apath =(await getApplicationDocumentsDirectory()).path
    objectStorage: 'cos', // å›¾ç‰‡æœåŠ¡å™¨é»˜è®¤'cos'
    logLevel: 6, // æ—¥å¿—ç­‰çº§ï¼Œé»˜è®¤å€¼6
    listener: OnConnectListener(
      onConnectSuccess: () {
        // å·²ç»æˆåŠŸè¿æ¥åˆ°æœåŠ¡å™¨
      },
      onConnecting: () {
        // æ­£åœ¨è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œé€‚åˆåœ¨ UI ä¸Šå±•ç¤ºâ€œæ­£åœ¨è¿æ¥â€çŠ¶æ€ã€‚
      },
      onConnectFailed: (code, errorMsg) {
        // è¿æ¥æœåŠ¡å™¨å¤±è´¥ï¼Œå¯ä»¥æç¤ºç”¨æˆ·å½“å‰ç½‘ç»œè¿æ¥ä¸å¯ç”¨
      },
      onUserSigExpired: () {
        // ç™»å½•ç¥¨æ®å·²ç»è¿‡æœŸï¼Œè¯·ä½¿ç”¨æ–°ç­¾å‘çš„ UserSig è¿›è¡Œç™»å½•ã€‚
      },
      onKickedOffline: () {
        // å½“å‰ç”¨æˆ·è¢«è¸¢ä¸‹çº¿ï¼Œæ­¤æ—¶å¯ä»¥ UI æç¤ºç”¨æˆ·â€œæ‚¨å·²ç»åœ¨å…¶ä»–ç«¯ç™»å½•äº†å½“å‰è´¦å·ï¼Œæ˜¯å¦é‡æ–°ç™»å½•ï¼Ÿâ€
      },
    ),
  );
```

### 4. è®¾ç½®ç›‘å¬å™¨

```dart
// Set listener
    OpenIM.iMManager
      //
      ..userManager.setUserListener(OnUserListener(
      ))
      // Add message listener (remove when not in use)
      ..messageManager.setAdvancedMsgListener(OnAdvancedMsgListener(
      ))

      // Set up message sending progress listener
      ..messageManager.setMsgSendProgressListener(OnMsgSendProgressListener(
      ))
      ..messageManager.setCustomBusinessListener(
      )
      // Set up friend relationship listener
      ..friendshipManager.setFriendshipListener(OnFriendshipListener(
      ))

      // Set up conversation listener
      ..conversationManager.setConversationListener(OnConversationListener(
      ))

      // Set up group listener
      ..groupManager.setGroupListener(OnGroupListener(
      ));
```

### 5. ç™»å½•

```dart
// è¿”å›å½“å‰ç™»å½•ç”¨æˆ·çš„èµ„æ–™
final userInfo = await OpenIM.iMManager.login(
      userID: "", // userIDæ¥è‡ªäºè‡ªèº«ä¸šåŠ¡æœåŠ¡å™¨
      token: "", // tokenéœ€è¦ä¸šåŠ¡æœåŠ¡å™¨æ ¹æ®secretå‘OpenIMæœåŠ¡ç«¯äº¤æ¢è·å–
    );
```
