---
title: Android
hide_title: true
sidebar_position: 2
---

## ğŸš€ä½¿ç”¨ Demo
æˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨é¦–å…ˆè¿è¡Œæˆ‘ä»¬ä¸ºæ‚¨å‡†å¤‡çš„æ¡†æ¶ç›¸å…³çš„ç¤ºä¾‹ [DEMO](https://github.com/OpenIMSDK/Open-IM-Android-Demo) ã€‚è¿™ä¸ä»…å¯ä»¥è®©æ‚¨ç›´è§‚ä½“éªŒ OpenIMSDK çš„åŠŸèƒ½ï¼Œè¿˜å°†å¸®åŠ©æ‚¨åœ¨å®é™…é›†æˆè¿‡ç¨‹ä¸­è¿…é€Ÿå®šä½å’Œè§£å†³é—®é¢˜ã€‚

## é›†æˆæ­¥éª¤

### 1. æ·»åŠ ä¾èµ–

    implementation 'io.openim:android-sdk:latest@aar'
    implementation 'io.openim:core-sdk:latest@aar'
    implementation 'com.google.code.gson:gson:2.9.0'

### 2. å¯¼å…¥åŒ…

    import io.openim.android.sdk.OpenIMClient

### 3. åˆå§‹åŒ–

```java
InitConfig initConfig=new InitConfig(
            Constant.getImApiUrl(),//SDK apiåœ°å€
            Constant.getImWsUrl(),//SDK WebSocketåœ°å€
            getStorageDir(),//SDKæ•°æ®åº“å­˜å‚¨ç›®å½•
            );

 OpenIMClient.getInstance().initSDK(
            application, //Application
            initConfig,//InitConfig
            new OnConnListener() {
                @Override
                public void onConnectFailed(long code, String error) {
                    //è¿æ¥æœåŠ¡å™¨å¤±è´¥
                }

                @Override
                public void onConnectSuccess() {
                    //è¿æ¥æœåŠ¡å™¨æˆåŠŸ
                }

                @Override
                public void onConnecting() {
                    //è¿æ¥æœåŠ¡å™¨ä¸­...
                }

                @Override
                public void onKickedOffline() {
                    //å½“å‰ç”¨æˆ·è¢«è¸¢ä¸‹çº¿
                }

                @Override
                public void onUserTokenExpired() {
                    //ç™»å½•ç¥¨æ®å·²ç»è¿‡æœŸ
                }
            });
```

### 4. è®¾ç½®ç›‘å¬å™¨

```java
// Set listener
// sdké‡‡ç”¨çš„setæ–¹å¼ï¼Œå¤šæ¬¡setä¼šæ›¿æ¢ä¸Šæ¬¡set,å»ºè®®ä½¿ç”¨ä¸€ä¸ªä¸­é—´ä»¶ä½¿ç”¨addæ–¹å¼åˆ†å‘æ‰§è¡Œå›è°ƒ,å‚è€ƒdemo IMEventè¿™ä¸ªç±»

    // å½“å‰ç™»å½•ç”¨æˆ·èµ„æ–™å˜æ›´å›è°ƒ
   OpenIMClient.getInstance().userInfoManager.setOnUserListener(info -> {});
   // æ”¶åˆ°æ–°æ¶ˆæ¯ï¼Œå·²è¯»å›æ‰§ï¼Œæ¶ˆæ¯æ’¤å›ç›‘å¬ã€‚
   OpenIMClient.getInstance().messageManager.setAdvancedMsgListener(new OnAdvanceMsgListener() { }
   // å¥½å…³ç³»å‘ç”Ÿå˜åŒ–ç›‘å¬
   OpenIMClient.getInstance().friendshipManager.setOnFriendshipListener(new OnFriendshipListener() {}
   // ä¼šè¯æ–°å¢æˆ–æ”¹å˜ç›‘å¬
   OpenIMClient.getInstance().conversationManager.setOnConversationListener(new OnConversationListener() {}
   // ç¾¤ç»„å…³ç³»å‘ç”Ÿæ”¹å˜ç›‘å¬
   OpenIMClient.getInstance().groupManager.setOnGroupListener(new OnGroupListener() {}
   // ä¿¡ä»¤ç›‘å¬
   OpenIMClient.getInstance().signalingManager.setSignalingListener(new OnSignalingListener() {}
```

### 5. ç™»å½•

æ³¨æ„ï¼šå…ˆè®¾ç½®ç›‘å¬å™¨åç™»å½•

```java
OpenIMClient.getInstance().login(new OnBase<String>() {
          @Override
          public void onError(int code, String error) {
          }

          @Override
          public void onSuccess(String data) {
          //å…¶ä»–apiè°ƒç”¨å¿…é¡»ä¿è¯ç™»å½•å›è°ƒæˆåŠŸåæ“ä½œ

          }
       }, userID, imToken);
```
