---
title: React Native
hide_title: true
sidebar_position: 4
---

## ä½¿ç”¨ Demo ğŸš€
æˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨é¦–å…ˆè¿è¡Œæˆ‘ä»¬ä¸ºæ‚¨å‡†å¤‡çš„æ¡†æ¶ç›¸å…³çš„ç¤ºä¾‹ [DEMO](https://github.com/openimsdk/openim-reactnative-demo) ã€‚è¿™ä¸ä»…å¯ä»¥è®©æ‚¨ç›´è§‚ä½“éªŒ OpenIMSDK çš„åŠŸèƒ½ï¼Œè¿˜å°†å¸®åŠ©æ‚¨åœ¨å®é™…é›†æˆè¿‡ç¨‹ä¸­è¿…é€Ÿå®šä½å’Œè§£å†³é—®é¢˜ã€‚

## æ³¨æ„äº‹é¡¹ â—ï¸

-  `open-im-sdk-rn@3.5.1` åŒ…å«äº†é‡å¤§çš„ç ´åæ€§æ›´æ–°ã€‚å¦‚æœæ‚¨éœ€è¦å‡çº§ï¼Œè¯·æ£€æŸ¥ä¼ å…¥å‚æ•°å’Œè¿”å›æ•°æ®ã€‚

-  ä¸å…¶ä»–SDKä¸åŒï¼Œ`React Native SDK` **operationID** ä¸æ˜¯å¯é€‰çš„ï¼Œè€Œæ˜¯å¿…å¡«çš„ã€‚ï¼ˆoperationID ç”¨äºåç«¯æ—¥å¿—æŸ¥è¯¢ï¼‰

## é›†æˆæ­¥éª¤ ( React Native CLI )

### 1. æ·»åŠ ä¾èµ–

```sh
yarn add open-im-sdk-rn
```

å¯¹äºå®‰å“ç«¯ï¼Œéœ€è¦æ·»åŠ ä»¥ä¸‹ url æ¥æ„å»º gradle :
```gradle
// Top-level build file where you can add configuration options common to all sub-projects/modules.
buildscript {
    ext {
        buildToolsVersion = "33.0.0"
        minSdkVersion = 21
        compileSdkVersion = 33
        targetSdkVersion = 33

        // We use NDK 23 which has both M1 support and is the side-by-side NDK version from AGP.
        ndkVersion = "23.1.7779620"
    }
    repositories {
        google()
        mavenCentral()
        maven {
            allowInsecureProtocol = true
            url 'https://open-im-online.rentsoft.cn:51000/repository/maven2/'
        }
    }
    dependencies {
        classpath("com.android.tools.build:gradle")
        classpath("com.facebook.react:react-native-gradle-plugin")
    }
}
allprojects {
    repositories {
        maven {
            allowInsecureProtocol = true
            url 'https://open-im-online.rentsoft.cn:51000/repository/maven2/'
        }
    }
}
```

### 2. åˆå§‹åŒ– SDK

```ts
import OpenIMSDKRN from 'open-im-sdk-rn';
import RNFS from 'react-native-fs';

RNFS.mkdir(RNFS.DocumentDirectoryPath + '/tmp');

OpenIMSDKRN.initSDK({
  platformID: 2,  // 1: ios, 2: android
  apiAddr: 'http://your-server-ip:10002',
  wsAddr: 'ws://your-server-ip:10001',
  dataDir: RNFS.DocumentDirectoryPath + '/tmp',
  logLevel: 5,
  isLogStandardOutput: true,
}, 'opid');
```

### 3. ç™»å½•ã€è®¾ç½®ç›‘å¬

```ts
import OpenIMSDKRN, { OpenIMEmitter } from 'open-im-sdk-rn';

OpenIMSDKRN.login({
  userID: 'IM user ID',
  token: 'IM user token',
}, 'opid');

OpenIMEmitter.addListener('onConnecting', () => {
  console.log('onConnecting');
});

OpenIMEmitter.addListener('onConnectSuccess', () => {
  console.log('onConnectSuccess');
});

OpenIMEmitter.addListener('onConnectFailed', ({ errCode, errMsg }) => {
  console.log('onConnectFailed', errCode, errMsg);
});
```

### 4. æ”¶å‘æ¶ˆæ¯

```ts
import OpenIMSDKRN, { OpenIMEmitter } from 'open-im-sdk-rn';
import type { MessageItem } from 'open-im-sdk-rn';

OpenIMEmitter.addListener('onRecvNewMessages', (data: MessageItem[]) => {
  console.log('onRecvNewMessages', data);
});

const message = await OpenIMSDKRN.createTextMessage('hello openim', 'opid');

OpenIMSDKRN.sendMessage({
  recvID: 'recipient user ID',
  groupID: '',
  message,
}, 'opid')
  .then(() => {
    // Message sent successfully âœ‰ï¸
  })
  .catch(err => {
    // Failed to send message âŒ
    console.log(err);
  });
```