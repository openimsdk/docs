---
sidebar_position: 6
title: 搜索消息
hide_title: true
---

<center>

## 搜索消息

</center>

### 简要描述
- 按照指定条件搜索消息.

### 请求方式
- `post`

### 请求URL
- `{API_ADDRESS}/msg/search_msg`

### Header
|header名|示例值|选填|类型|说明|
|:----    |:-------    |:--- |---|------      |
|operationID|1646445464564|必填|string|用于全局链路追踪，建议使用时间戳，在每个请求中独立|
|token|eyJhbxxxx3Xs|必填|string|[管理员 token](docs/restapi/apis/authenticationManagement/getAdminToken.mdx)|

### 请求参数示例

```json
{
    "sendID": "019825",
    "recvID": "464588223",
    "contentType": 101,
    "sendTime": "2025-04-15",
    "sessionType": 3,
    "pagination": {
        "pageNumber": 1,
        "showNumber": 2
    }
}
```

| 字段名                  | 选填   | 类型    | 说明                                                  |
|:------------------------|:-------|:--------|:-----------------------------------------------------|
| sendID                  | 选填   | string  | 消息发送者ID                                         |
| recvID                  | 选填   | string  | 消息接收者ID                                         |
| contentType             | 选填   | int     | [消息类型](docs/restapi/contentDescription.mdx)      |
| sendTime                | 选填   | string  | 消息发送时间，检索出该时间以后24小时的消息          |
| sessionType             | 选填   | int     | Session type, 1: 单聊, 3: 群聊, 4: 系统通知         |
| pagination              | 必填   | object  | 分页参数结构体                                       |
| pagination.pageNumber   | 必填   | int     | 当前页码，从1开始                                    |
| pagination.showNumber   | 必填   | int     | 当前页请求数量                                       |

### 成功返回示例

```json
{
    "errCode": 0,
    "errMsg": "",
    "errDlt": "",
    "data": {
        "chatLogs": [
            {
                "chatLog": {
                    "serverMsgID": "df8147686d3d5073e3e25952b7e68f48",
                    "clientMsgID": "cd2946aa5c3a0780ef145ece226880c6",
                    "sendID": "019825",
                    "recvID": "464588223",
                    "groupID": "464588223",
                    "recvNickname": "",
                    "senderPlatformID": 5,
                    "senderNickname": "xuzhijvn",
                    "senderFaceURL": "",
                    "groupName": "Test Group",
                    "sessionType": 3,
                    "msgFrom": 100,
                    "contentType": 101,
                    "content": "{\"content\":\"dasda\"}",
                    "status": 2,
                    "sendTime": 1744676086645,
                    "createTime": 1744676086155,
                    "ex": "",
                    "groupFaceURL": "",
                    "groupMemberCount": 24,
                    "seq": 1916,
                    "groupOwner": "",
                    "groupType": 2
                },
                "isRevoked": false
            },
            {
                "chatLog": {
                    "serverMsgID": "7f5a3528b0f84ac4e15ca203e9a1ac29",
                    "clientMsgID": "77833db423190b98a2c1fd291c2075f1",
                    "sendID": "019825",
                    "recvID": "464588223",
                    "groupID": "464588223",
                    "recvNickname": "",
                    "senderPlatformID": 5,
                    "senderNickname": "xuzhijvn",
                    "senderFaceURL": "",
                    "groupName": "Test Group",
                    "sessionType": 3,
                    "msgFrom": 100,
                    "contentType": 101,
                    "content": "{\"content\":\"dasdasdasdasd\"}",
                    "status": 2,
                    "sendTime": 1744728041741,
                    "createTime": 1744728041465,
                    "ex": "",
                    "groupFaceURL": "",
                    "groupMemberCount": 24,
                    "seq": 1925,
                    "groupOwner": "",
                    "groupType": 2
                },
                "isRevoked": false
            }
        ],
        "chatLogsNum": 14
    }
}
```

### 成功返回示例的参数说明

| 参数名              | 类型     | 说明                                           |
|:-------------------|:---------|:----------------------------------------------|
| errCode            | int      | 错误码，0表示成功                              |
| errMsg             | string   | 错误简要信息，为空                             |
| errDlt             | errDlt   | 错误详细信息，为空                             |
| data               | object   | 通用数据对象，具体结构见下方                    |
| chatLogs           | array    | 消息列表                                       |
| chatLogs.chatLog   | object   | [聊天消息](docs/restapi/contentFields.mdx)     |
| chatLogs.isRevoked | bool     | 消息是否被撤销                                 |
| chatLogsNum        | int      | 消息总数                                       |

### 失败返回示例

```json
{
  "errCode": 1004,
  "errMsg": "RecordNotFoundError",
  "errDlt": ": [1004]RecordNotFoundError"
}
```

### 失败返回示例的参数说明

| 参数名             | 类型     | 说明                                    |
|:-------------------|:---------|:----------------------------------------|
| errCode            | int      | 错误码，具体查看全局错误码文档          |
| errMsg             | string   | 错误简要信息                            |
| errDlt             | errDlt   | 错误详细信息                            |
