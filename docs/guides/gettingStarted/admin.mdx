---
title: 'ç®¡ç†åå°åŠç›‘æ§ç³»ç»Ÿ'
sidebar_position: 6
---




# ç®¡ç†åå° ğŸ–¥ï¸
### ğŸŸ¢ å¼€æ”¾ç«¯å£

| TCP ç«¯å£  | è¯´æ˜                    | æ“ä½œ âš™ï¸                                      |
|:--------:|:-----------------------:|:--------------------------------------------:|
| TCP:11002| `http://ip:11002` è®¿é—®ç®¡ç†åå° | ç«¯å£æ”¾è¡Œæˆ– nginx åå‘ä»£ç†ï¼Œå¹¶å…³é—­é˜²ç«å¢™ |

## ğŸ“Œ è®¿é—®ç®¡ç†åå°

:::tip
åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ `http://ip:11002` æ¥è®¿é—®ç®¡ç†åå°ã€‚æ­¤ ip ä¸ºæœåŠ¡ç«¯ ip ï¼Œä¸”ç¡®ä¿æ‚¨çš„æµè§ˆå™¨èƒ½è®¿é—®ã€‚é»˜è®¤è´¦å·å’Œå¯†ç å‡ä¸ºadmin1
:::

import Image3 from './assets/admin.jpg';

<img src={Image3} width="700" alt="PC Web Interface" />
```





# ç›‘æ§ç³»ç»Ÿ
æœ¬æ–‡æ¡£ä»‹ç»äºŒè¿›åˆ¶&docker-composeæ–¹å¼éƒ¨ç½²openimçš„Prometheusç›‘æ§å’Œå‘Šè­¦åŠŸèƒ½çš„éƒ¨ç½²å’Œä½¿ç”¨,
k8sæ–¹å¼éƒ¨ç½²openimçš„ç›‘æ§å’Œå‘Šè­¦ä½¿ç”¨è¯·æŸ¥é˜…é“¾æ¥æ–‡æ¡£:https://github.com/openimsdk/helm-charts/blob/main/docs/user-guide-zh.md

## éƒ¨ç½²
é€šè¿‡open-im-serveræœåŠ¡æä¾›çš„docker-compose.ymléƒ¨ç½²ç›‘æ§å‘Šè­¦éœ€è¦çš„ç»„ä»¶:prometheus,grafana,alertmanager,node-exporter(å¯é€‰)ï¼›
æŠŠé»˜è®¤æ³¨é‡Šçš„å››ä¸ªç»„ä»¶å˜æˆå¯ç”¨ï¼Œå®‰è£…æˆåŠŸåï¼Œå³å¯é€šè¿‡ç®¡ç†åå°è¿›å…¥grafanaé¡µé¢æŸ¥çœ‹ç›‘æ§ä¿¡æ¯ã€‚
import Image4 from './assets/docker-compose1.png';
<img src={Image4} width="700" alt="PC Web Interface" />
```
import Image5 from './assets/docker-compose2.png';
<img src={Image5} width="700" alt="PC Web Interface" />
```

## ä½“éªŒ
1. é€šè¿‡openimç®¡ç†åå°ç½‘é¡µçš„é“¾æ¥å…¥å£è®¿é—®,ç®¡ç†åå°ç½‘é¡µåœ°å€:https://ip/openim-admin-front/
2. ç®¡ç†åå°é»˜è®¤ç”¨æˆ·åå’Œå¯†ç  (admin1:admin1),ç‚¹å‡»ä¸‹å›¾é“¾æ¥ï¼Œå°†æ‰“å¼€grafanaç½‘é¡µ.
import Image6 from './assets/admin1.png';
<img src={Image6} width="700" alt="PC Web Interface" />
```
3. ç™»å…¥grafanaä½¿ç”¨é»˜è®¤ç”¨æˆ·åå’Œå¯†ç (admin:admin).
import Image7 from './assets/login.png';
<img src={Image7} width="700" alt="PC Web Interface" />
```
4. æ·»åŠ Prometheusæ•°æ®æºï¼Œå¦‚ä¸‹å›¾ï¼Œè¾“å…¥Prometheusæ•°æ®æºçš„url:http://172.28.0.1:19090,ç‚¹å‡»"Save and Test"è¿›è¡Œæ•°æ®æºä¿å­˜.
import Image8 from './assets/database.png';
<img src={Image8} width="700" alt="PC Web Interface" />
```

import Image9 from './assets/database2.png';
<img src={Image9} width="700" alt="PC Web Interface" />
```
5. å¯¼å…¥dockerç‰ˆæœ¬openimè‡ªå®šä¹‰dashboardä»ªè¡¨ç›˜.ç‚¹å‡»ä¸‹å›¾çš„importæŒ‰é’®
import Image10 from './assets/dashboard.png';
<img src={Image10} width="700" alt="PC Web Interface" />
```

æ‹·è´ config/template/prometheus-dashboard.yamlå†…å®¹ åˆ°ä¸‹å›¾åŒºåŸŸ,æ¥ç€ç‚¹å‡»loadæŒ‰é’®
import Image11 from './assets/dashboard2.png';
<img src={Image11} width="700" alt="PC Web Interface" />
```
é€‰æ‹©ä½ çš„ Data Sourceå’Œjob ,ä½ å°†è¦æŸ¥çœ‹åˆ°è‡ªå®šä¹‰æŒ‡æ ‡ä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾
import Image12 from './assets/dashboard3.png';
<img src={Image12} width="700" alt="PC Web Interface" />
```
6.å¯¼å…¥node-exportçš„å®˜ç½‘dashboardï¼Œç›´æ¥å®˜ç½‘å¯»æ‰¾ä½ æ»¡æ„çš„node-exporter dashboardè¯•å›¾ï¼Œç„¶åå¯¼å…¥ï¼Œæ¯”å¦‚ 1860(Node Exporter Full)
import Image13 from './assets/dashboard4.png';
<img src={Image13} width="700" alt="PC Web Interface" />
```

ä½ å°†è¦æŸ¥çœ‹åˆ°node-exporteræŒ‡æ ‡ä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾
import Image14 from './assets/dashboard5.png';
<img src={Image14} width="700" alt="PC Web Interface" />
```

7.é…ç½®å‘Šè­¦ï¼Œç³»ç»Ÿå®ç°äº†ä¸¤æ¡é»˜è®¤å‘Šè­¦è§„åˆ™(instance_down,database_insert_failure_alerts)é‚®ä»¶å‘Šè­¦ï¼Œ
åªéœ€è¦ä¿®æ”¹alertmanager.yml(æˆ–è€…åœ¨make initå‘½ä»¤å‰ä¿®æ”¹alertmanager.yml.template)é‡Œé¢çš„å‘é€é‚®ç®±å’Œæ¥æ”¶é‚®ç®±çš„é…ç½®ä¿¡æ¯ï¼Œå³å¯æ¥æ”¶ç³»ç»Ÿå‘Šè­¦é‚®ä»¶ã€‚
å‘Šè­¦é…ç½®æ–‡ä»¶è¯´æ˜:
import Image15 from './assets/alert1.png';
<img src={Image15} width="700" alt="PC Web Interface" />
```
é‚®ä»¶å‘Šè­¦æ¶æ„è¯´æ˜å›¾,Prometheusç»„ä»¶åŠ è½½å‘Šè­¦è§„åˆ™instance-down-rules.ymlæ–‡ä»¶ï¼Œå°†ç¬¦åˆæ¡ä»¶çš„å‘Šè­¦ä¿¡æ¯å‘é€åˆ°alertmanagerç»„ä»¶ï¼Œ
alertmanagerç»„ä»¶åŠ è½½alertmanager.ymlå’Œemail.tmplæ–‡ä»¶ï¼Œé€šè¿‡é…ç½®çš„å‘Šè­¦é‚®ç®±ä¿¡æ¯å’Œé‚®ä»¶æ¨¡ç‰ˆå‘é€é‚®ä»¶
import Image16 from './assets/alert2.png';
<img src={Image16} width="700" alt="PC Web Interface" />
```
å‘Šè­¦è§„åˆ™instance-down-rules.yamlæ–‡ä»¶è¯´æ˜ï¼Œå¦‚æœå¢åŠ å‘Šè­¦è§„åˆ™å¯ä»¥åœ¨instance-down-rules.ymlæ–‡ä»¶ä¸­æ·»åŠ è§„åˆ™:
import Image17 from './assets/alert3.png';
<img src={Image17} width="700" alt="PC Web Interface" />
```
å‘Šè­¦ç®¡ç†alertmanager.ymlæ–‡ä»¶è¯´æ˜,è¯·ä¿®æ”¹æˆä½ çœŸå®çš„å‘é€é‚®ç®±å’Œæ¥æ”¶é‚®ç®±é…ç½®ä¿¡æ¯ï¼Œå³å¯æ¥æ”¶å‘Šè­¦ä¿¡æ¯:
import Image18 from './assets/alert4.png';
<img src={Image18} width="700" alt="PC Web Interface" />
```
8.å¦‚æœæ˜¯åœ¨k8sç¯å¢ƒé€šè¿‡helm chartæ–¹å¼éƒ¨ç½²çš„openimæœåŠ¡ï¼Œå¯ä»¥é€šè¿‡grafanaæŸ¥çœ‹lokiæ—¥å¿—ï¼Œå³é€šè¿‡grafanaæŸ¥çœ‹openimæ‰€æœ‰æœåŠ¡çš„æ—¥å¿—ä¿¡æ¯ã€‚
ç›®å‰äºŒè¿›åˆ¶å’Œdockeréƒ¨ç½²æ²¡æœ‰é›†æˆlokiæ—¥å¿—æ”¶é›†ç»„ä»¶ï¼Œæƒ³ä½“éªŒlokiæ—¥å¿—æ”¶é›†åŠŸèƒ½ï¼Œè¯·é‡‡ç”¨helm chartéƒ¨ç½²ï¼Œ
è¯¦æƒ…è¯·æŸ¥é˜…é“¾æ¥https://github.com/openimsdk/helm-charts/blob/main/docs/user-guide-zh.md