# OIMWS SDK Server 使用指南

OIMWS SDK Server 是一个基于 Go 语言的服务端程序，用于处理 WebSocket 连接，并提供即时消息服务。本文档旨在指导您如何安装并运行 OIMWS SDK Server，并解释其主要功能和参数配置。

## 安装

您可以通过两种方式安装 OIMWS SDK Server：

1. **通过 Go Get 安装**： 在命令行中运行以下命令来安装 OIMWS SDK Server：

   ```go
   go get github.com/openim-sigs/oimws/example
   ```

2. **克隆 GitHub 仓库**： 克隆 [OIMWS GitHub 仓库](https://github.com/openim-sigs/oimws/) 到您的本地环境：

   ```go
   git clone https://github.com/openim-sigs/oimws/
   ```

   完成后，请阅读 README 文件，并在 `example/` 目录下执行程序。

## 运行

在运行 OIMWS SDK Server 之前，请确保您已经正确安装。

运行程序需要配置一些参数，您可以通过命令行标志来设置这些参数。以下是程序的主要函数及其参数：

```go
func main() {
    // 省略部分代码以突出参数配置
    var sdkWsPort, logLevel *int
    var openIMWsAddress, openIMApiAddress, openIMDbDir *string

    // 参数定义和默认值
    openIMApiAddress = flag.String("openIM_api_address", "http://127.0.0.1:10002", "openIM api listening address")
    openIMWsAddress = flag.String("openIM_ws_address", "ws://127.0.0.1:10001", "openIM ws listening address")
    sdkWsPort = flag.Int("sdk_ws_port", 10003, "openIMSDK ws listening port")
    logLevel = flag.Int("openIM_log_level", 5, "control log output level")
    openIMDbDir = flag.String("openIMDbDir", "./db", "openIM db dir")

    flag.Parse()

    // 省略核心逻辑代码
}
```

### 参数说明

1. `openIM_api_address`: openIM API 监听地址，默认为 `http://127.0.0.1:10002`。
2. `openIM_ws_address`: openIM WebSocket 监听地址，默认为 `ws://127.0.0.1:10001`。
3. `sdk_ws_port`: openIMSDK WebSocket 监听端口，默认为 `10003`。
4. `openIM_log_level`: 日志输出级别，默认为 `5`，这控制了日志的详细程度。
5. `openIMDbDir`: openIM 数据库目录，默认为当前目录下的 `./db` 文件夹。

### 运行示例

在命令行中，您可以通过添加标志来修改这些参数。例如：

```bash
./example -openIM_api_address="http://localhost:10002" -openIM_ws_address="ws://localhost:10001" -sdk_ws_port=10003 -openIM_log_level=4 -openIMDbDir="./data/db"
```

这将启动服务器，并根据提供的参数配置服务。

> OIMWS SDK Server 提供了一个灵活且功能强大的平台，用于处理即时消息和 WebSocket 连接。通过遵循本指南，您应该能够成功安装并运行 OIMWS SDK Server，以及理解和配置其主要参数。对于更高级的配置和详细信息，请参阅项目的 GitHub 页面和相关文档。
