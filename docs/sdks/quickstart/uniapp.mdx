---
title: uni-app
hide_title: true
sidebar_position: 6
---

## ğŸš€ä½¿ç”¨ Demo
æˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨é¦–å…ˆè¿è¡Œæˆ‘ä»¬ä¸ºæ‚¨å‡†å¤‡çš„æ¡†æ¶ç›¸å…³çš„ç¤ºä¾‹ [DEMO](https://github.com/openimsdk/open-im-uniapp-demo) ã€‚è¿™ä¸ä»…å¯ä»¥è®©æ‚¨ç›´è§‚ä½“éªŒ OpenIMSDK çš„åŠŸèƒ½ï¼Œè¿˜å°†å¸®åŠ©æ‚¨åœ¨å®é™…é›†æˆè¿‡ç¨‹ä¸­è¿…é€Ÿå®šä½å’Œè§£å†³é—®é¢˜ã€‚

## å¼€å‘å‡†å¤‡

### 1. ä»…ä½¿ç”¨ uniapp å¼€å‘ H5 æˆ– å°ç¨‹åº ç‰ˆæœ¬

> ä½¿ç”¨ uniapp å¼€å‘ h5 å’Œ å°ç¨‹åº(æˆ–åŸç”Ÿå°ç¨‹åº)åªèƒ½ä½¿ç”¨çº¯ JS ç‰ˆæœ¬ SDK

- ç›´æ¥ä½¿ç”¨ [JSSDK](docs/sdks/quickstart/miniProgram.mdx) ï¼Œ**ä¸éœ€è¦** å‚è€ƒä¸‹é¢çš„é›†æˆæ­¥éª¤ã€‚

### 2. ä»…ä½¿ç”¨ uniapp å¼€å‘ å®‰å“/iOS ç‰ˆæœ¬

- åŒ…å« APP ç«¯å¼€å‘ï¼Œ**å¿…é¡»** æŒ‰ç…§ä¸‹é¢çš„é›†æˆæ­¥éª¤ï¼Œä½¿ç”¨äº‘æ’ä»¶å¯¼å…¥ SDK ï¼Œä½¿ç”¨ npm åŒ…è°ƒç”¨ã€‚å› ä¸º APP ç«¯çš„å®ç°æ–¹å¼éƒ½æ˜¯é€šè¿‡ [App åŸç”Ÿè¯­è¨€æ’ä»¶](https://uniapp.dcloud.net.cn/plugin/native-plugin.html) å®ç°ã€‚

### 3. ä½¿ç”¨ uniapp å¼€å‘ å®‰å“/iOS + H5/å°ç¨‹åº ç‰ˆæœ¬

> æœ€æ–°çš„ npm åŒ…åœ¨é APP ç«¯ï¼Œå·²ç»æ”¯æŒå…¼å®¹ JSSDK ï¼Œå¯ä»¥ä½¿ç”¨å…¼å®¹å†™æ³•ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ open-im-sdk ä¸­çš„æ–¹æ³•ã€‚npm åŒ…ä½¿ç”¨æ–¹å¼ä¸Šä¸çº¯ APP å¼€å‘ä¼šæœ‰æ‰€å·®å¼‚ï¼Œå¼€å‘è€…å¼€å‘è€…å¯ä»¥æ ¹æ®è‡ªå·±é¡¹ç›®çš„å®é™…æƒ…å†µçµæ´»é€‰æ‹©ã€‚

> éœ€è¦ä½¿ç”¨äº‘æ’ä»¶å¯¼å…¥ SDK , ä¸” `openim-uniapp-polyfill` ç‰ˆæœ¬éœ€è¦ >= 1.2.0ã€‚

- æ³¨æ„1ï¼šç›‘å¬å™¨ä½¿ç”¨ uniapp çš„æ–¹å¼è°ƒç”¨ç›‘å¬å™¨ï¼Œä¼ å…¥çš„æ˜¯ **å¿…é¡»** `IMSDK.IMEvents` ä¸­çš„æ–¹æ³•ï¼Œå› ä¸º JSSDK ä¸ APP çš„ç›‘å¬å™¨å¤§å°å†™æœ‰åŒºåˆ« , npm åŒ…ä¸­å·²ç»åšè‡ªåŠ¨è½¬æ¢ã€‚

- æ³¨æ„2ï¼šåœ¨éƒ¨åˆ† API ä¸­ä¸åŒç«¯å¯èƒ½å› ä¸ºå¹³å°çš„æ”¯æŒï¼Œç”¨æ³•ä¸Šä¼šæœ‰æ‰€åŒºåˆ«ï¼Œä½¿ç”¨æ—¶æŸ¥çœ‹å¯¹åº”å¹³å° API çš„æ–‡æ¡£ï¼Œæ³¨æ„å·®åˆ«ï¼š
  - è¦æ ¹æ®å¹³å°å»ä¼ å…¥æ­£ç¡®çš„ platformID
  - Login API å‚æ•°ä¸ä¸€è‡´
  - å®‰å“/iOS éœ€è¦ [initSDK](docs/sdks/api/initialization/initSDK.mdx) åæ‰èƒ½ä½¿ç”¨
  - åˆ›å»ºå›¾ç‰‡ã€æ–‡ä»¶æ¶ˆæ¯ä½¿ç”¨çš„ API ä¸ä¸€è‡´ï¼Œè¦ä½¿ç”¨ **æ¡ä»¶ç¼–è¯‘** è°ƒç”¨ä¸åŒçš„æ–¹æ³•ã€‚
  - ...

#### 3.1 è·¨å¹³å°æƒ…å†µä¸‹å¤šç§ä½¿ç”¨æ–¹å¼

> æ–¹æ³•ä¸€ ï¼šè·¨å¹³å°å‚æ•°å’Œæ–¹æ³•åä¸€è‡´æƒ…å†µä¸‹ï¼Œä½¿ç”¨ uniapp çš„æ–¹å¼æ¥è°ƒç”¨ã€‚å‚æ•°ä¸ä¸€è‡´çš„æƒ…å†µä¸‹ **æ¡ä»¶ç¼–è¯‘** ä¼ å…¥å¯¹åº”çš„å‚æ•°ã€‚

- æ­¤ä¸ºå¤šç«¯å…¼å®¹å¼å†™æ³•ï¼Œåœ¨è·¨å¹³å°æƒ…å†µä¸‹ï¼Œè¦æ£€æŸ¥ API è¿”å›å†…å®¹ç»“æ„æ˜¯å¦ä¸€è‡´ã€‚

```javascript
import IMSDK from 'openim-uniapp-polyfill';

IMSDK.asyncApi('createTextMessage', IMSDK.uuid(), 'text')
  .then((data) => {
    // do something
  })

IMSDK.subscribe(IMSDK.IMEvents.OnConnectSuccess, () => {
  // do something
});

```

> æ–¹æ³•äºŒ ï¼šH5/å°ç¨‹åº ç«¯ä½¿ç”¨ **æ¡ä»¶ç¼–è¯‘** + JSSDK å¤„ç†è·¨å¹³å°æ–¹æ³•åä¸€è‡´ï¼Œå‚æ•°å·®å¼‚è¾ƒå¤§çš„æ–¹æ³•ã€‚

- APP ç«¯éœ€è¦è°ƒç”¨ [initSDK](docs/sdks/api/initialization/initSDK.mdx) åæ‰èƒ½ä½¿ç”¨ã€‚

```javascript
import IMSDK from 'openim-uniapp-polyfill';

// #ifdef H5 || MP-WEIXIN
IMSDK.asyncApi('login', IMSDK.uuid(), {
  userID : '123',
  token: 'token',
  platformID: 5,
  wsAddr: 'ws://your-server-ip:10003',
  apiAddr: 'http://your-server-ip:10002',
});
// #endif

// #ifdef APP-PLUS
IMSDK.asyncApi('login', IMSDK.uuid(), {
  userID: '123',
  token: 'token',
});
// #endif
```


## é›†æˆæ­¥éª¤

### 1. æ·»åŠ ä¾èµ–

> å®˜æ–¹æ’ä»¶å·²ä¸Šä¼ è‡³ [dcloud æ’ä»¶å¸‚åœº](https://ext.dcloud.net.cn/plugin?id=6577)

- é€‰æ‹©å¯¹åº”é¡¹ç›®å’ŒåŒ…åå¼•å…¥ SDK

![uni_import](./assets/uni_import.png)

- æ‰“å¼€å¼•å…¥ SDK é¡¹ç›®æ ¹ç›®å½•ä¸‹ `manifest.json` æ–‡ä»¶ï¼Œé€‰æ‹©**App åŸç”Ÿæ’ä»¶é…ç½®**ï¼Œé€‰æ‹©äº‘ç«¯æ’ä»¶è¿›è¡Œå¯¼å…¥ã€‚

![uni_import_manifest](./assets/uni_import_manifest.png)

- ä¸‹è½½ npm åŒ…ï¼Œç®€åŒ–å¯¹ SDK çš„å¼•å…¥å’Œä½¿ç”¨ï¼Œå¹¶å°è£… API ä¸º Promse å½¢å¼ã€‚

> openim-uniapp-polyfill >= 1.2.0 ä»¥ä¸Šç‰ˆæœ¬å·²ç»æ”¯æŒå…¼å®¹ JSSDK å…·ä½“ä½¿ç”¨å‚è€ƒå¼€å‘å‡†å¤‡ã€‚

```bash
npm install openim-uniapp-polyfill open-im-sdk
```

### 2. åœ¨é¡¹ç›®ä¸­å¼•å…¥

```js
import IMSDK from 'openim-uniapp-polyfill';

const userID = '';
const token = '';
IMSDK.asyncApi(IMSDK.IMMethods.Login, IMSDK.uuid(), userID, token)
  .then(() => {
    // ç™»å½•æˆåŠŸ
  })
  .catch(() => {
    // ç™»å½•å¤±è´¥
  });

const onConnectSuccess = () => {
  // è¿æ¥æˆåŠŸ
};
// è®¾ç½®ç›‘å¬
IMSDK.subscribe(IMSDK.IMEvents.OnConnectSuccess, onConnectSuccess);
// å¸è½½ç›‘å¬
IMSDK.unsubscribe(IMSDK.IMEvents.OnConnectSuccess, onConnectSuccess);
```

### 3. äº‘æ‰“åŒ…è‡ªå®šä¹‰è°ƒè¯•åŸºåº§

> æ³¨æ„ï¼šåŒ…åéœ€è¦ä¸ç¬¬ä¸€æ­¥å¼•å…¥äº‘æ’ä»¶æ—¶è®¾ç½®çš„åŒ…åä¸€è‡´

![uni_build](./assets/uni_build.png)

### 4. å·²è‡ªå®šä¹‰è°ƒè¯•åŸºåº§å¯åŠ¨

![uni_run](./assets/uni_run.png)
