---
title: 'æºç éƒ¨ç½²'
sidebar_position: 1
---

# ğŸ›  æºç éƒ¨ç½²

##  1. ç¯å¢ƒåŠç»„ä»¶è¦æ±‚
å¯¹äºæœåŠ¡å™¨ç¯å¢ƒã€ç³»ç»Ÿã€ä»¥åŠå­˜å‚¨ç»„ä»¶å¯ä»¥å‚è€ƒ[æ­¤æ–‡æ¡£](./env-comp)



---


## 2. éƒ¨ç½² OpenIM Server (IM)

### 2.1 ğŸ“¡ è®¾ç½® OPENIM_IP

```jsx
# å¦‚æœæœåŠ¡å™¨æœ‰å¤–ç½‘IP
export OPENIM_IP="å¤–ç½‘IP"
# å¦‚æœä»…æä¾›å†…ç½‘æœåŠ¡
export OPENIM_IP="å†…ç½‘IP"

```

### 2.2 ğŸ—ï¸ éƒ¨ç½²ç»„ä»¶ (mongodb/redis/zookeeper/kafka/MinIOç­‰)

```
# å»ºè®®åˆ‡æ¢åˆ°release-v3.5åŠä»¥åçš„releaseåˆ†æ”¯ 
git clone https://github.com/OpenIMSDK/open-im-server && cd open-im-server && make init && docker compose up -d

```

### 2.3 ğŸ› ï¸ ç¼–è¯‘

```
make build

```

### 2.4 ğŸš€ å¯åŠ¨/åœæ­¢/æ£€æµ‹

```jsx
# å¯åŠ¨
make start
# åœæ­¢
make stop
# æ£€æµ‹
make check

```

## 3. éƒ¨ç½² App Server (Chat)

### 3.1 ğŸ—ï¸ éƒ¨ç½²ç»„ä»¶ï¼ˆmysqlï¼‰

```
#è¿”å›ä¸Šä¸€çº§ç›®å½•
cd ..
# cloneä»“åº“ å»ºè®®åˆ‡æ¢åˆ°release-v1.5åŠä»¥åçš„releaseåˆ†æ”¯
git clone https://github.com/OpenIMSDK/chat chat && cd chat
# éƒ¨ç½²mysql
docker run -d --name mysql2 -p 13306:3306 -p 33306:33060 -v "$(pwd)/components/mysql/data:/var/lib/mysql" -v "/etc/localtime:/etc/localtime" -e MYSQL_ROOT_PASSWORD="openIM123" --restart always mysql:5.7
```

### 3.2 ğŸ› ï¸ ç¼–è¯‘

```
make init
make build
```

### 3.3 ğŸš€ å¯åŠ¨/åœæ­¢/æ£€æµ‹

```jsx
# å¯åŠ¨
make start
# åœæ­¢
make stop
# æ£€æµ‹
make check
```


## 4. å¿«é€ŸéªŒè¯

è¯·å‚è€ƒ[å¿«é€ŸéªŒè¯](./quickTestServer)æ–‡æ¡£


## 5. ç®¡ç†åå°å’Œç›‘æ§ç³»ç»Ÿ

è¯·å‚è€ƒ [ç®¡ç†åå°å’Œç›‘æ§ç³»ç»Ÿ](./admin) æ–‡æ¡£ã€‚



## 6. å…³äºé…ç½®é¡¹çš„ä¿®æ”¹

### 6.1 ğŸ› ï¸ å…±ç”¨é…ç½®é¡¹çš„ä¿®æ”¹

| é…ç½®é¡¹ | éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶ | æ“ä½œ |
| --- | --- | --- |
| mongo/kafka/minio ç›¸å…³ | .env, openim-server/config/config.yaml | éœ€é‡å¯ç»„ä»¶å’Œ IM |
| redis/zookeeper ç›¸å…³ | .env, openim-server/config/config.yaml, chat/config/config.yaml | éœ€é‡å¯ç»„ä»¶ã€IM å’Œ Chat |
| SECRET | openim-server/config/config.yaml, chat/config/config.yaml | éœ€é‡å¯ IM å’Œ Chat |

### 6.2 ğŸ”„ å…±ç”¨é…ç½®é¡¹ä¸­ç‰¹æ®Šé…ç½®é¡¹çš„ä¿®æ”¹

ç‰¹æ®Šé…ç½®é¡¹ï¼šAPI_OPENIM_PORT/MINIO_PORT/OPENIM_IP/GRAFANA_PORT

1. ä¿®æ”¹ `.env` æ–‡ä»¶ä¸­çš„ç‰¹æ®Šé…ç½®é¡¹
2. åœ¨ **`openim-server/config/config.yaml`** ä¸­æŒ‰ç…§è§„åˆ™ä¿®æ”¹é…ç½®

```jsx
object:
  apiURL: "http://$OPENIM_IP:$API_OPENIM_PORT"
  minio:
    endpoint: "http://$DOCKER_BRIDGE_GATEWAY:$MINIO_PORT"
    signEndpoint: "http://$OPENIM_IP:$MINIO_PORT"

grafanaUrl: http://$OPENIM_IP:$GRAFANA_PORT
```

### 6.3 ç«¯å£çš„ä¿®æ”¹
ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºä»»ä½•ç«¯å£çš„ä¿®æ”¹ï¼Œéƒ½éœ€è¦åŒæ­¥ä¿®æ”¹open-im-server/scripts/install/environment.shä¸­çš„ç«¯å£
1. åœ¨ **`chat/config/config.yaml`** ä¸­æŒ‰ç…§è§„åˆ™ä¿®æ”¹é…ç½®

```jsx
openIMUrl: "[http://172.28.0.1:](http://127.0.0.1:10002/)$API_OPENIM_PORT"
```

4. é‡å¯ IM å’Œ Chat

### 6.3 ğŸ› ï¸ å…¶ä»–é…ç½®é¡¹çš„ä¿®æ”¹

å¯¹äº **`.env`**ã€**`chat/config/config.yaml`** å’Œ **`openim-server/config/config.yaml`** ä¸­çš„å…¶ä»–é…ç½®é¡¹ï¼Œå¯ä»¥å•ç‹¬ä¿®æ”¹ç›¸åº”æ–‡ä»¶ä¸­çš„è¿™äº›é…ç½®é¡¹ã€‚

## 7. å¸¸è§é—®é¢˜

### 7.1 ğŸ“œ æ—¥å¿—æŸ¥çœ‹

æ—¥å¿—ä½ç½®ï¼š

- è¿è¡Œæ—¶æ—¥å¿—ï¼š`logs/OpenIM.log.all.*`
- å¯åŠ¨æ—¥å¿—ï¼š`_output/logs/openim_*.log`



### 7.2 ğŸš€ å¯åŠ¨é¡ºåº

å¯åŠ¨é¡ºåºå¦‚ä¸‹ï¼š

- IM ä¾èµ–çš„ç»„ä»¶ï¼šmongo/redis/kafka/zookeeper/minio
- **IM**
- Chat ä¾èµ–çš„ç»„ä»¶ï¼šmysql
- **Chat**

### 7.3 ğŸ³ Docker ç‰ˆæœ¬

æ–°ç‰ˆæœ¬çš„ Docker å·²å°† `docker-compose` é›†æˆä¸ºå…¶æ ¸å¿ƒåŠŸèƒ½ï¼Œä¸éœ€å•ç‹¬å®‰è£…ã€‚æ¨èç‰ˆæœ¬ `23.0.1`ã€‚




